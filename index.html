<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta property="og:title" content="Create Your Cursor!">
    <meta property="og:description" content="Make your own Cursor for games like, Rhythia, Sound Space, Osu and More!">
    <meta property="og:image" content="https://i.imgur.com/5ntZWR2.png">
    <meta property="og:url" content="https://faworee.github.io/CreateYourCursor/">
    <meta property="og:type" content="website">

    <title>Custom Cursor Creator</title>
    <link rel="icon" type="image/png" href="https://i.imgur.com/5ntZWR2.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
        }

        .wrapper {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            width: 100vw;
            transform: scale(0.66);
            transform-origin: center center;
        }
        
        .container {
            max-width: 1200px;
            margin: 2rem auto;
            padding: 2rem;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 2rem;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        .main-content {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }

        @media (min-width: 1024px) {
            .main-content {
                flex-direction: row;
            }
        }

        .controls-panel {
            flex: 1 1 350px;
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
            max-height: calc(100vh - 8rem);
            overflow-y: auto;
            padding-right: 1rem;
        }

        .controls-panel::-webkit-scrollbar {
            width: 8px;
        }

        .controls-panel::-webkit-scrollbar-track {
            background: #2d3748;
            border-radius: 10px;
        }

        .controls-panel::-webkit-scrollbar-thumb {
            background: #4a5568;
            border-radius: 10px;
            border: 2px solid #2d3748;
        }

        .controls-panel::-webkit-scrollbar-thumb:hover {
            background: #718096;
        }
        
        canvas {
            background: #1e293b;
            border: 2px solid rgba(59, 130, 246, 0.2);
            border-radius: 1rem;
        }
        
        .slider-container {
            position: relative;
        }
        
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: linear-gradient(90deg, #1e293b 0%, #334155 100%);
            outline: none;
            transition: all 0.3s ease;
        }
        
        input[type="range"]:hover {
            background: linear-gradient(90deg, #334155 0%, #475569 100%);
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: 2px solid #1e40af;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
            transition: all 0.2s ease;
        }
        
        input[type="range"]::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 6px 12px rgba(59, 130, 246, 0.4);
        }
        
        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border: 2px solid #1e40af;
            cursor: pointer;
            box-shadow: 0 4px 8px rgba(59, 130, 246, 0.3);
        }
        
        .shape-button {
            position: relative;
            padding: 12px 24px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 14px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: 2px solid transparent;
            background: #4b5563;
            color: #e5e7eb;
            overflow: hidden;
        }
        
        .shape-button::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(59, 130, 246, 0.1);
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .shape-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
            border-color: rgba(59, 130, 246, 0.3);
        }
        
        .shape-button:hover::before {
            opacity: 1;
        }
        
        .shape-button.selected {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            color: white;
            border-color: #1e40af;
            box-shadow: 0 8px 20px rgba(59, 130, 246, 0.3);
        }
        
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 52px;
            height: 28px;
        }
        
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .toggle-switch .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            border-radius: 28px;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid #6b7280;
        }
        
        .toggle-switch input:checked + .slider {
            background: linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%);
            border-color: #1e40af;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.3);
        }
        
        .toggle-switch .slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 2px;
            bottom: 2px;
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 50%;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
        }
        
        .toggle-switch input:checked + .slider:before {
            transform: translateX(24px);
        }
        
        .input-field {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border: 2px solid #475569;
            border-radius: 8px;
            padding: 8px 12px;
            color: #e2e8f0;
            font-size: 14px;
            transition: all 0.3s ease;
            width: 80px;
            text-align: center;
        }
        
        .input-field:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            border: 2px solid #047857;
            border-radius: 12px;
            padding: 12px 24px;
            color: white;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 6px rgba(16, 185, 129, 0.2);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(16, 185, 129, 0.3);
            background: linear-gradient(135deg, #059669 0%, #047857 100%);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6366f1 0%, #4f46e5 100%);
            border: 2px solid #4338ca;
            border-radius: 8px;
            padding: 8px 16px;
            color: white;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #4f46e5 0%, #4338ca 100%);
            transform: translateY(-1px);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            border: 2px solid #b91c1c;
            border-radius: 8px;
            padding: 8px 16px;
            color: white;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-danger:hover {
            background: linear-gradient(135deg, #dc2626 0%, #b91c1c 100%);
            transform: translateY(-1px);
        }
        
        .section {
            background: rgba(15, 23, 42, 0.5);
            border: 1px solid rgba(148, 163, 184, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: #f1f5f9;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        input[type="color"] {
            width: 40px;
            height: 40px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid #3b82f6;
            border-radius: 0.5rem;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            -webkit-appearance: none;
            -moz-appearance: none;
            appearance: none;
        }

        input[type="color"]::-webkit-color-swatch-wrapper {
            padding: 0;
        }
        
        input[type="color"]::-webkit-color-swatch {
            border: none;
            border-radius: 0.25rem;
        }

        input[type="color"]::-moz-color-swatch {
            border: none;
            border-radius: 0.25rem;
        }
        
        .file-input {
            position: relative;
            display: inline-block;
            cursor: pointer;
            width: 100%;
        }
        
        .file-input input[type="file"] {
            position: absolute;
            left: -9999px;
        }
        
        .file-input-label {
            display: block;
            padding: 12px 20px;
            background: linear-gradient(135deg, #374151 0%, #4b5563 100%);
            border: 2px dashed #6b7280;
            border-radius: 12px;
            text-align: center;
            color: #d1d5db;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .file-input:hover .file-input-label {
            border-color: #3b82f6;
            background: linear-gradient(135deg, #4b5563 0%, #6b7280 100%);
            color: #e5e7eb;
        }

        .gradient-color-input-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: #334155;
            padding: 0.5rem;
            border-radius: 0.5rem;
            border: 1px solid #475569;
        }
        
        .gradient-color-input-group input[type="color"] {
            width: 2rem;
            height: 2rem;
            border-radius: 0.25rem;
            border: none;
            cursor: pointer;
        }

        .remove-gradient-color-btn {
            background: #ef4444;
            color: white;
            border-radius: 0.25rem;
            width: 1.5rem;
            height: 1.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
        }
        @media (min-width: 1024px) {
            .flex-container {
                flex-wrap: nowrap;
            }
        }
        
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="container">
            <h1 class="text-4xl font-bold text-center bg-gradient-to-r from-blue-400 to-purple-500 bg-clip-text text-transparent mb-8">Custom Cursor Creator</h1>
            
            <div class="main-content">
                <div class="controls-panel">
                    <div class="section">
                        <div class="section-title">
                            <span>🎨</span>
                            Choose a Shape
                        </div>
                        <div class="grid grid-cols-2 gap-3">
                            <button class="shape-button selected" data-shape="squircle">Squircle</button>
                            <button class="shape-button" data-shape="circle">Circle</button>
                            <button class="shape-button" data-shape="square">Square</button>
                            <button class="shape-button" data-shape="triangle">Triangle</button>
                            <button class="shape-button" data-shape="star">Star</button>
                            <button class="shape-button" data-shape="hexagon">Hexagon</button>
                            <button class="shape-button" data-shape="heart">Heart</button>
                            <button class="shape-button" data-shape="diamond">Diamond</button>
                            <button class="shape-button" data-shape="pentagon">Pentagon</button>
                            <button class="shape-button" data-shape="trapezoid">Trapezoid</button>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">
                            <span>✏️</span>
                            Outline Options
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-medium text-slate-300">Use Gradient for Outline</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="useGradientOutline">
                                    <span class="slider"></span>
                                </label>
                            </div>
                            
                     

                            <div id="solid-outline-options" class="space-y-4">
                                <div class="flex items-center justify-between">
                                    <label class="text-sm font-medium text-slate-300">Solid Outline Color</label>
                                    <input type="color" id="outlineColor" value="#4299e1">
                                </div>
                            </div>

                            <div class="slider-container">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-slate-300">Outline Opacity</label>
                                    <input type="number" id="outlineOpacityInput" class="input-field" min="0" max="1" step="0.01" value="1.00">
                                </div>
                                <input type="range" id="outlineOpacity" min="0" max="1" value="1" step="0.01">
                            </div>

                            <div class="slider-container">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-slate-300">Outline Thickness</label>
                                    <input type="number" id="borderThicknessInput" class="input-field" min="0" max="50" value="10">
                                </div>
                                <input type="range" id="borderThickness" min="0" max="50" value="10">
                            </div>

                
                            <div id="gradient-outline-options" class="space-y-4 hidden">

                                <div id="gradient-outline-colors" class="flex flex-wrap gap-3 justify-center">
   
                                </div>
    
                                <button id="addOutlineColor" class="w-full btn-secondary">Add Outline Gradient Color</button>

                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">
                            <span>✨</span>
                            Glow Options
                        </div>
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-medium text-slate-300">Add Glow</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="addGlow">
                                    <span class="slider"></span>
                                </label>
                            </div>

                            <div id="glow-options" class="space-y-4 hidden">
                                 <div class="flex items-center justify-between">
                                    <label class="text-sm font-medium text-slate-300">Use Outline Color/Gradient</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="useOutlineGlow">
                                        <span class="slider"></span>
                                    </label>
                                </div>

                                <div id="separate-glow-options" class="space-y-4">

                                    <div id="glow-color-option" class="flex items-center justify-between">
  
                                        <label class="text-sm font-medium text-slate-300">Glow Color</label>
   
                                        <input type="color" id="glowColorInput" value="#4299e1">
 
   
                                    </div>
   
                                    <div class="slider-container">
    
                                        <div class="flex justify-between items-center mb-2">
   

        
                                            <label class="text-sm font-medium text-slate-300">Glow Amount</label>
        
                                            <input type="number" id="glowAmountInput" class="input-field" min="0" max="1" step="0.01" value="0.50">
     
                                        </div>
     
                                        <input type="range" id="glowAmount" min="0" max="1" value="0.5" step="0.01">
  
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">
                            <span>🎨</span>
                            Fill Options
                        </div>
                        
                        <div class="space-y-4">
                            <div class="flex items-center justify-between">
                                <label class="text-sm font-medium text-slate-300">Use Solid Fill</label>
                                <label class="toggle-switch">
                                    <input type="checkbox" id="useSolidFill" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                              <div class="flex items-center justify-between">
                                    <label class="text-sm font-medium text-slate-300">Use Gradient Fill</label>
                                    <label class="toggle-switch">
                                        <input type="checkbox" id="useGradientFill">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            <div id="solid-fill-options" class="space-y-4">
                                <div class="flex items-center justify-between" id="solidFillColorContainer">
                                    <label class="text-sm font-medium text-slate-300">Solid Fill Color</label>
                                    <input type="color" id="solidFillColor" value="#ffffff">
                                </div>
                                <div class="slider-container">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-slate-300">Fill Opacity</label>
                                        <input type="number" id="fillOpacityInput" class="input-field" min="0" max="1" step="0.01" value="1.00">
                                    </div>
                                    <input type="range" id="fillOpacity" min="0" max="1" value="1" step="0.01">
                                </div>
                                <div id="gradient-fill-options" class="space-y-4 hidden">
                                    <div id="gradient-fill-colors" class="flex flex-wrap gap-3 justify-center">
                                    </div>
                                    <button id="addFillColor" class="w-full btn-secondary">Add Fill Gradient Color</button>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="section">
                        <div class="section-title">
                            <span>🖼️</span>
                            Add an Image (optional)
                        </div>
                        <div class="file-input">
                            <input type="file" id="imageUpload" accept="image/*">
                            <label for="imageUpload" class="file-input-label">
                                Choose Image File
                            </label>
                        </div>
                        <div id="image-options" class="space-y-4 hidden mt-4">
                             <div class="slider-container">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-slate-300">Image Scale</label>
                                    <input type="number" id="imageScaleInput" class="input-field" min="0.01" max="2" step="0.01" value="1.00">
                                </div>
                                <input type="range" id="imageScale" min="0.01" max="2" value="1" step="0.01">
                            </div>
                            <div class="slider-container">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-slate-300">Image Opacity</label>
                                    <input type="number" id="imageOpacityInput" class="input-field" min="0" max="1" step="0.01" value="1.00">
                                </div>
                                <input type="range" id="imageOpacity" min="0" max="1" value="1" step="0.01">
                            </div>

                            <div class="slider-container">
                                <div class="flex justify-between items-center mb-2">
                                    <label class="text-sm font-medium text-slate-300">Image Rotation</label>
                                    <input type="number" id="imageRotationInput" class="input-field" min="0" max="360" step="1" value="0">
                                </div>
                                <input type="range" id="imageRotation" min="0" max="360" value="0" step="1">
                            </div>
                            
                            <div class="flex items-center justify-between gap-4">
                                <div class="slider-container w-1/2">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-slate-300">Position X</label>
                                        <input type="number" id="imageOffsetXInput" class="input-field" min="-100" max="100" value="0">
                                    </div>
                                    <input type="range" id="imageOffsetX" min="-100" max="100" value="0">
                                </div>
                                <div class="slider-container w-1/2">
                                    <div class="flex justify-between items-center mb-2">
                                        <label class="text-sm font-medium text-slate-300">Position Y</label>
                                        <input type="number" id="imageOffsetYInput" class="input-field" min="-100" max="100" value="0">
                                    </div>
                                    <input type="range" id="imageOffsetY" min="-100" max="100" value="0">
                                </div>
                            </div>
                        </div>
                        <button id="removeImageBtn" class="mt-3 w-full btn-danger hidden">Remove Image</button>
                    </div>

                    <button id="downloadBtn" class="w-full py-4 btn-primary text-lg font-bold">
                        <span>⬇️</span>
                        Download as PNG
                    </button>
                </div>

                <div class="flex-1 flex items-center justify-center p-8 bg-gradient-to-br from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50">
                    <canvas id="cursorCanvas" width="400" height="400"></canvas>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const canvas = document.getElementById('cursorCanvas');
            const ctx = canvas.getContext('2d');
            const shapeButtons = document.querySelectorAll('.shape-button');
            const useSolidFillCheckbox = document.getElementById('useSolidFill');
            const solidFillOptionsDiv = document.getElementById('solid-fill-options');
            const solidFillColorContainer = document.getElementById('solidFillColorContainer');
            const solidFillColorInput = document.getElementById('solidFillColor');
            const fillOpacitySlider = document.getElementById('fillOpacity');
            const fillOpacityInput = document.getElementById('fillOpacityInput');
            const outlineColorInput = document.getElementById('outlineColor');
            const outlineOpacitySlider = document.getElementById('outlineOpacity');
            const outlineOpacityInput = document.getElementById('outlineOpacityInput');
            const borderThicknessSlider = document.getElementById('borderThickness');
            const borderThicknessInput = document.getElementById('borderThicknessInput');
            const useGradientFillCheckbox = document.getElementById('useGradientFill');
            const gradientFillOptionsDiv = document.getElementById('gradient-fill-options');
            const gradientFillColorsDiv = document.getElementById('gradient-fill-colors');
            const addFillColorBtn = document.getElementById('addFillColor');
            const useGradientOutlineCheckbox = document.getElementById('useGradientOutline');
            const gradientOutlineOptionsDiv = document.getElementById('gradient-outline-options');
            const gradientOutlineColorsDiv = document.getElementById('gradient-outline-colors');
            const addOutlineColorBtn = document.getElementById('addOutlineColor');
            const addGlowCheckbox = document.getElementById('addGlow');
            const glowOptionsDiv = document.getElementById('glow-options');
            const useOutlineGlowCheckbox = document.getElementById('useOutlineGlow');
            const separateGlowOptionsDiv = document.getElementById('separate-glow-options');
            const glowColorOptionDiv = document.getElementById('glow-color-option');
            const glowColorInput = document.getElementById('glowColorInput');
            const glowAmountSlider = document.getElementById('glowAmount');
            const glowAmountInput = document.getElementById('glowAmountInput');
            const imageUploadInput = document.getElementById('imageUpload');
            const imageOptionsDiv = document.getElementById('image-options');
            const imageScaleSlider = document.getElementById('imageScale');
            const imageScaleInput = document.getElementById('imageScaleInput');
            const imageOpacitySlider = document.getElementById('imageOpacity');
            const imageOpacityInput = document.getElementById('imageOpacityInput');
            const imageRotationSlider = document.getElementById('imageRotation');
            const imageRotationInput = document.getElementById('imageRotationInput');
            const imageOffsetXSlider = document.getElementById('imageOffsetX');
            const imageOffsetXInput = document.getElementById('imageOffsetXInput');
            const imageOffsetYSlider = document.getElementById('imageOffsetY');
            const imageOffsetYInput = document.getElementById('imageOffsetYInput');
            const removeImageBtn = document.getElementById('removeImageBtn');
            const downloadBtn = document.getElementById('downloadBtn');
            const solidOutlineOptionsDiv = document.getElementById('solid-outline-options');
            
            let currentShape = 'squircle';
            let solidFillColor = '#ffffff';
            let fillOpacity = 1;
            let gradientFillColors = ['#ff0000', '#0000ff'];
            let outlineColor = '#4299e1';
            let outlineOpacity = 1;
            let borderThickness = 10;
            let gradientOutlineColors = ['#00ff00', '#0000ff'];
            let addGlow = false;
            let useOutlineGlow = false;
            let glowColor = '#4299e1';
            let glowAmount = 0.5;
            let uploadedImage = null;
            let imageScale = 1.0;
            let imageOpacity = 1.0;
            let imageRotation = 0;
            let imageOffsetX = 0;
            let imageOffsetY = 0;

            const syncSliderInput = (slider, input, callback) => {
                const isInt = slider.step === "1";
                const precision = isInt ? 0 : 2;
                slider.addEventListener('input', (e) => {
                    const value = parseFloat(e.target.value);
                    input.value = value.toFixed(precision);
                    callback(value);
                });
                input.addEventListener('input', (e) => {
                    const value = parseFloat(e.target.value);
                    if (!isNaN(value)) {
                        slider.value = value;
                        callback(value);
                    }
                });
            };

            const updateControlsVisibility = () => {
                const isSolidFillActive = useSolidFillCheckbox.checked;
                const isGradientFillActive = useGradientFillCheckbox.checked;
                const isGradientOutlineActive = useGradientOutlineCheckbox.checked;
                const isGlowActive = addGlowCheckbox.checked;
                const isOutlineGlowActive = useOutlineGlowCheckbox.checked;

                solidFillOptionsDiv.classList.toggle('hidden', !isSolidFillActive);
                gradientFillOptionsDiv.classList.toggle('hidden', !isGradientFillActive);
                solidFillColorContainer.classList.toggle('hidden', isGradientFillActive);
                gradientOutlineOptionsDiv.classList.toggle('hidden', !isGradientOutlineActive);
                solidOutlineOptionsDiv.classList.toggle('hidden', isGradientOutlineActive);
                glowOptionsDiv.classList.toggle('hidden', !isGlowActive);
                glowColorOptionDiv.classList.toggle('hidden', isOutlineGlowActive);
                removeImageBtn.classList.toggle('hidden', !uploadedImage);
                imageOptionsDiv.classList.toggle('hidden', !uploadedImage);
            };

            const addGradientColorInput = (container, defaultColor) => {
                const colorWrapper = document.createElement('div');
                colorWrapper.className = 'gradient-color-input-group';
                colorWrapper.innerHTML = `
                    <input type="color" value="${defaultColor}">
                    <button class="remove-gradient-color-btn">&times;</button>
                `;
                container.appendChild(colorWrapper);
                colorWrapper.querySelector('input').addEventListener('input', drawCursor);
                colorWrapper.querySelector('.remove-gradient-color-btn').addEventListener('click', () => {
                    if (container.children.length > 1) {
                        colorWrapper.remove();
                        drawCursor();
                    }
                });
                drawCursor();
            };

            const getGradientColors = (container) => {
                return Array.from(container.querySelectorAll('input[type="color"]')).map(input => input.value);
            };

            const hexToRgbA = (hex, alpha) => {
                let c;
                if (/^#([A-Fa-f0-9]{3}){1,2}$/.test(hex)) {
                    c = hex.substring(1).split('');
                    if (c.length === 3) {
                        c = [c[0], c[0], c[1], c[1], c[2], c[2]];
                    }
                    c = '0x' + c.join('');
                    return 'rgba(' + [(c >> 16) & 255, (c >> 8) & 255, c & 255].join(',') + ',' + alpha + ')';
                }
                return `rgba(0,0,0,${alpha})`;
            };

            const drawShape = (path, center, size) => {
                switch (currentShape) {
                    case 'squircle':
                        const n = 4;
                        const r = size / 2;
                        path.moveTo(center.x + r, center.y);
                        for (let i = 0; i <= 360; i++) {
                            const angle = (i * Math.PI) / 180;
                            const cos_t = Math.cos(angle);
                            const sin_t = Math.sin(angle);
                            const cos_t_abs = Math.abs(cos_t);
                            const sin_t_abs = Math.abs(sin_t);
                            const x = center.x + r * Math.sign(cos_t) * Math.pow(cos_t_abs, 2 / n);
                            const y = center.y + r * Math.sign(sin_t) * Math.pow(sin_t_abs, 2 / n);
                            path.lineTo(x, y);
                        }
                        path.closePath();
                        break;
                    case 'circle':
                        path.arc(center.x, center.y, size / 2, 0, 2 * Math.PI);
                        break;
                    case 'square':
                        const s = size / Math.sqrt(2);
                        path.rect(center.x - s / 2, center.y - s / 2, s, s);
                        break;
                    case 'triangle':
                        const height = size * Math.sqrt(3) / 2;
                        path.moveTo(center.x, center.y - height / 2);
                        path.lineTo(center.x - size / 2, center.y + height / 2);
                        path.lineTo(center.x + size / 2, center.y + height / 2);
                        path.closePath();
                        break;
                    case 'star':
                        const outerRadius = size / 2;
                        const innerRadius = outerRadius * 0.4;
                        for (let i = 0; i < 10; i++) {
                            const angle = (i * Math.PI) / 5;
                            const radius = i % 2 === 0 ? outerRadius : innerRadius;
                            const x = center.x + radius * Math.cos(angle - Math.PI / 2);
                            const y = center.y + radius * Math.sin(angle - Math.PI / 2);
                            if (i === 0) path.moveTo(x, y);
                            else path.lineTo(x, y);
                        }
                        path.closePath();
                        break;
                    case 'hexagon':
                        for (let i = 0; i < 6; i++) {
                            const angle = (i * Math.PI) / 3;
                            const x = center.x + (size / 2) * Math.cos(angle);
                            const y = center.y + (size / 2) * Math.sin(angle);
                            if (i === 0) path.moveTo(x, y);
                            else path.lineTo(x, y);
                        }
                        path.closePath();
                        break;
                    case 'heart':
                        const scale = size / 32; 
                        path.moveTo(center.x + 16 * Math.pow(Math.sin(0), 3) * scale, center.y - (13 * Math.cos(0) - 5 * Math.cos(2 * 0) - 2 * Math.cos(3 * 0) - Math.cos(4 * 0)) * scale);
                        for (let t = 0; t <= 2 * Math.PI; t += 0.01) {
                            const x = 16 * Math.pow(Math.sin(t), 3);
                            const y = 13 * Math.cos(t) - 5 * Math.cos(2 * t) - 2 * Math.cos(3 * t) - Math.cos(4 * t);
                            path.lineTo(center.x + x * scale, center.y - y * scale);
                        }
                        path.closePath();
                        break;
                    case 'diamond':
                        path.moveTo(center.x, center.y - size/2);
                        path.lineTo(center.x + size/2, center.y);
                        path.lineTo(center.x, center.y + size/2);
                        path.lineTo(center.x - size/2, center.y);
                        path.closePath();
                        break;
                    case 'pentagon':
                        for (let i = 0; i < 5; i++) {
                            const angle = (i / 5) * 2 * Math.PI - Math.PI / 2;
                            const x = center.x + (size / 2) * Math.cos(angle);
                            const y = center.y + (size / 2) * Math.sin(angle);
                            if (i === 0) path.moveTo(x, y);
                            else path.lineTo(x, y);
                        }
                        path.closePath();
                        break;
                    case 'trapezoid':
                        const widthTop = size * 0.5;
                        const widthBottom = size * 0.8;
                        const heightTrapezoid = size * 0.8;
                        path.moveTo(center.x - widthTop/2, center.y - heightTrapezoid/2);
                        path.lineTo(center.x + widthTop/2, center.y - heightTrapezoid/2);
                        path.lineTo(center.x + widthBottom/2, center.y + heightTrapezoid/2);
                        path.lineTo(center.x - widthBottom/2, center.y + heightTrapezoid/2);
                        path.closePath();
                        break;
                }
            };

            const drawCursor = () => {
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                const center = { x: canvas.width / 2, y: canvas.height / 2 };
                const size = 150;
                const fillPath = new Path2D();
                drawShape(fillPath, center, size - borderThickness);
                
                let fillDrawn = false;
                if (useSolidFillCheckbox.checked) {
                    if (useGradientFillCheckbox.checked) {
                        const colors = getGradientColors(gradientFillColorsDiv);
                        if (colors.length > 1) {
                            const gradient = ctx.createLinearGradient(0, center.y - (size - borderThickness) / 2, 0, center.y + (size - borderThickness) / 2);
                            const step = 1 / (colors.length - 1);
                            colors.forEach((color, index) => {
                                gradient.addColorStop(step * index, hexToRgbA(color, fillOpacity));
                            });
                            ctx.fillStyle = gradient;
                            ctx.fill(fillPath);
                            fillDrawn = true;
                        }
                    }
                    if (!fillDrawn) {
                        ctx.fillStyle = hexToRgbA(solidFillColor, fillOpacity);
                        ctx.fill(fillPath);
                    }
                }
                
                if (uploadedImage) {
                    ctx.save();
                    ctx.clip(fillPath);
                    ctx.globalAlpha = imageOpacity;
                    
                    const scaledWidth = uploadedImage.width * imageScale;
                    const scaledHeight = uploadedImage.height * imageScale;

                    ctx.translate(center.x + imageOffsetX, center.y + imageOffsetY);
                    ctx.rotate(imageRotation * Math.PI / 180);
                    ctx.drawImage(uploadedImage, -scaledWidth / 2, -scaledHeight / 2, scaledWidth, scaledHeight);
                    
                    ctx.restore();
                }

                const outlinePath = new Path2D();
                drawShape(outlinePath, center, size - borderThickness / 2);

                if (addGlowCheckbox.checked) {
                    let currentGlowColor;
                    if (useOutlineGlowCheckbox.checked) {
                        if (useGradientOutlineCheckbox.checked) {
                            const colors = getGradientColors(gradientOutlineColorsDiv);
                            currentGlowColor = colors.length > 0 ? colors[0] : outlineColor;
                        } else {
                            currentGlowColor = outlineColor;
                        }
                    } else {
                        currentGlowColor = glowColor;
                    }
                    ctx.shadowBlur = borderThickness * 2 * glowAmount;
                    ctx.shadowColor = currentGlowColor;
                    ctx.shadowOffsetX = 0;
                    ctx.shadowOffsetY = 0;
                } else {
                    ctx.shadowBlur = 0;
                    ctx.shadowColor = 'transparent';
                }

                if (borderThickness > 0) {
                    if (useGradientOutlineCheckbox.checked) {
                        const colors = getGradientColors(gradientOutlineColorsDiv);
                        if (colors.length > 1) {
                            const gradient = ctx.createLinearGradient(0, center.y - size/2, 0, center.y + size/2);
                            const step = 1 / (colors.length - 1);
                            colors.forEach((color, index) => {
                                gradient.addColorStop(step * index, hexToRgbA(color, outlineOpacity));
                            });
                            ctx.strokeStyle = gradient;
                        } else if (colors.length === 1) {
                            ctx.strokeStyle = hexToRgbA(colors[0], outlineOpacity);
                        } else {
                            ctx.strokeStyle = hexToRgbA(outlineColor, outlineOpacity);
                        }
                    } else {
                         ctx.strokeStyle = hexToRgbA(outlineColor, outlineOpacity);
                    }
                    ctx.lineWidth = borderThickness;
                    ctx.stroke(outlinePath);
                }
            };

            syncSliderInput(fillOpacitySlider, fillOpacityInput, (value) => {
                fillOpacity = value;
                drawCursor();
            });
            syncSliderInput(outlineOpacitySlider, outlineOpacityInput, (value) => {
                outlineOpacity = value;
                drawCursor();
            });
            syncSliderInput(borderThicknessSlider, borderThicknessInput, (value) => {
                borderThickness = value;
                drawCursor();
            });
            syncSliderInput(glowAmountSlider, glowAmountInput, (value) => {
                glowAmount = value;
                drawCursor();
            });
            syncSliderInput(imageScaleSlider, imageScaleInput, (value) => {
                imageScale = value;
                drawCursor();
            });
            syncSliderInput(imageOpacitySlider, imageOpacityInput, (value) => {
                imageOpacity = value;
                drawCursor();
            });
            syncSliderInput(imageRotationSlider, imageRotationInput, (value) => {
                imageRotation = value;
                drawCursor();
            });
            syncSliderInput(imageOffsetXSlider, imageOffsetXInput, (value) => {
                imageOffsetX = value;
                drawCursor();
            });
            syncSliderInput(imageOffsetYSlider, imageOffsetYInput, (value) => {
                imageOffsetY = value;
                drawCursor();
            });

            shapeButtons.forEach(button => button.addEventListener('click', (e) => {
                shapeButtons.forEach(b => b.classList.remove('selected'));
                button.classList.add('selected');
                currentShape = button.dataset.shape;
                drawCursor();
            }));
            useSolidFillCheckbox.addEventListener('change', (e) => {
                updateControlsVisibility();
                drawCursor();
            });
            useGradientFillCheckbox.addEventListener('change', (e) => {
                updateControlsVisibility();
                drawCursor();
            });
            useGradientOutlineCheckbox.addEventListener('change', (e) => {
                updateControlsVisibility();
                drawCursor();
            });
            addGlowCheckbox.addEventListener('change', (e) => {
                addGlow = e.target.checked;
                updateControlsVisibility();
                drawCursor();
            });
            useOutlineGlowCheckbox.addEventListener('change', (e) => {
                useOutlineGlow = e.target.checked;
                updateControlsVisibility();
                drawCursor();
            });
            solidFillColorInput.addEventListener('input', (e) => {
                solidFillColor = e.target.value;
                drawCursor();
            });
            outlineColorInput.addEventListener('input', (e) => {
                outlineColor = e.target.value;
                drawCursor();
            });
            glowColorInput.addEventListener('input', (e) => {
                glowColor = e.target.value;
                drawCursor();
            });
            addFillColorBtn.addEventListener('click', (e) => {
                e.preventDefault();
                addGradientColorInput(gradientFillColorsDiv, '#000000');
            });
            addOutlineColorBtn.addEventListener('click', (e) => {
                e.preventDefault();
                addGradientColorInput(gradientOutlineColorsDiv, '#000000');
            });
            imageUploadInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = (event) => {
                        const img = new Image();
                        img.onload = () => {
                            uploadedImage = img;
                            const size = 150;
                            imageScale = Math.min((size - borderThickness) / uploadedImage.width, (size - borderThickness) / uploadedImage.height);
                            imageScaleSlider.value = imageScale;
                            imageScaleInput.value = imageScale.toFixed(2);
                            drawCursor();
                            updateControlsVisibility();
                        };
                        img.src = event.target.result;
                    };
                    reader.readAsDataURL(file);
                } else {
                    uploadedImage = null;
                    drawCursor();
                    updateControlsVisibility();
                }
            });
            removeImageBtn.addEventListener('click', () => {
                uploadedImage = null;
                imageUploadInput.value = '';
                updateControlsVisibility();
                drawCursor();
            });
            downloadBtn.addEventListener('click', () => {
                const tempCanvas = document.createElement('canvas');
                tempCanvas.width = canvas.width;
                tempCanvas.height = canvas.height;
                const tempCtx = tempCanvas.getContext('2d');
                
                const center = { x: tempCanvas.width / 2, y: tempCanvas.height / 2 };
                const size = 150;
                const fillPath = new Path2D();
                drawShape(fillPath, center, size - borderThickness);

                let fillDrawn = false;
                if (useSolidFillCheckbox.checked) {
                    if (useGradientFillCheckbox.checked) {
                        const colors = getGradientColors(gradientFillColorsDiv);
                        if (colors.length > 1) {
                            const gradient = tempCtx.createLinearGradient(0, center.y - (size - borderThickness) / 2, 0, center.y + (size - borderThickness) / 2);
                            const step = 1 / (colors.length - 1);
                            colors.forEach((color, index) => {
                                gradient.addColorStop(step * index, hexToRgbA(color, fillOpacity));
                            });
                            tempCtx.fillStyle = gradient;
                            tempCtx.fill(fillPath);
                            fillDrawn = true;
                        }
                    }
                    if (!fillDrawn) {
                        tempCtx.fillStyle = hexToRgbA(solidFillColor, fillOpacity);
                        tempCtx.fill(fillPath);
                    }
                }
                
                if (uploadedImage) {
                    tempCtx.save();
                    tempCtx.clip(fillPath);
                    tempCtx.globalAlpha = imageOpacity;
                    
                    const scaledWidth = uploadedImage.width * imageScale;
                    const scaledHeight = uploadedImage.height * imageScale;

                    tempCtx.translate(center.x + imageOffsetX, center.y + imageOffsetY);
                    tempCtx.rotate(imageRotation * Math.PI / 180);
                    tempCtx.drawImage(uploadedImage, -scaledWidth / 2, -scaledHeight / 2, scaledWidth, scaledHeight);
                    
                    tempCtx.restore();
                }

                const outlinePath = new Path2D();
                drawShape(outlinePath, center, size - borderThickness / 2);

                if (addGlowCheckbox.checked) {
                    let currentGlowColor = glowColor;
                    if (useOutlineGlowCheckbox.checked) {
                        if (useGradientOutlineCheckbox.checked) {
                            const colors = getGradientColors(gradientOutlineColorsDiv);
                            if (colors.length > 0) {
                                currentGlowColor = colors[0];
                            }
                        } else {
                            currentGlowColor = outlineColor;
                        }
                    }
                    tempCtx.shadowBlur = borderThickness * 2 * glowAmount;
                    tempCtx.shadowColor = currentGlowColor;
                    tempCtx.shadowOffsetX = 0;
                    tempCtx.shadowOffsetY = 0;
                }
                
                if (borderThickness > 0) {
                    if (useGradientOutlineCheckbox.checked) {
                        const colors = getGradientColors(gradientOutlineColorsDiv);
                        if (colors.length > 1) {
                            const gradient = tempCtx.createLinearGradient(0, center.y - size/2, 0, center.y + size/2);
                            const step = 1 / (colors.length - 1);
                            colors.forEach((color, index) => {
                                gradient.addColorStop(step * index, hexToRgbA(color, outlineOpacity));
                            });
                            tempCtx.strokeStyle = gradient;
                        } else if (colors.length === 1) {
                            tempCtx.strokeStyle = hexToRgbA(colors[0], outlineOpacity);
                        } else {
                            tempCtx.strokeStyle = hexToRgbA(outlineColor, outlineOpacity);
                        }
                    } else {
                         tempCtx.strokeStyle = hexToRgbA(outlineColor, outlineOpacity);
                    }
                    tempCtx.lineWidth = borderThickness;
                    tempCtx.stroke(outlinePath);
                }

                const imageURL = tempCanvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.href = imageURL;
                link.download = `custom_cursor_${currentShape}.png`;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            });
            
            const initializeGradientColors = (container, colorsArray) => {
                container.innerHTML = '';
                colorsArray.forEach(color => {
                    addGradientColorInput(container, color);
                });
            };

            initializeGradientColors(gradientFillColorsDiv, gradientFillColors);
            initializeGradientColors(gradientOutlineColorsDiv, gradientOutlineColors);
            updateControlsVisibility();
            drawCursor();
        });
    </script>
</body>
</html>

